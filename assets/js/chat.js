document.addEventListener("DOMContentLoaded",(()=>{function e(){const e="block"===i.style.display;i.style.display=e?"none":"block"}function t(e,t){const n=document.createElement("div");n.classList.add("chat-message",t),n.textContent=e,l.appendChild(n),l.scrollTop=l.scrollHeight}function n(e){const t=l.querySelector(".thinking");if(e&&!t){const e=document.createElement("div");e.classList.add("thinking"),e.textContent="Thinking...",l.appendChild(e),l.scrollTop=l.scrollHeight}else!e&&t&&t.remove()}async function s(){if(m)return;const e=o.value.trim();if(o.value="",e){t(e,"user-message"),n(!0),m=!0;try{const s=await fetch("https://tznrpdmwzpuispggvpdk.supabase.co/functions/v1/public-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:"139ee9d1-61d2-4033-aa8b-36505d0da281",content:e,conversation_id:r})}),c=await s.json();r=c.reply.conversation_id,n(!1),t(c.reply.content,"server-message")}catch(e){n(!1),t("Interested in investing in https://mirrorai.vercel.app to get this live?","server-message")}m=!1}}const c=document.getElementById("chat-toggle-btn"),i=document.getElementById("chat-window"),d=document.getElementById("close-chat"),o=document.getElementById("chat-input"),a=document.getElementById("send-btn"),l=document.getElementById("chat-messages");let r=null,m=!1;c.addEventListener("click",e),d.addEventListener("click",(()=>{i.style.display="none"})),a.addEventListener("click",s),o.addEventListener("keypress",(e=>{"Enter"===e.key&&s()}))}));